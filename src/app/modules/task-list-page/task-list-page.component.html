<mat-toolbar color="secondary" class="toolbar mb-3">
   <img alt="Logo de ATOM Chat" ngSrc="assets/images/logo-atom-chat.png" width="192.5" height="55" priority />
   <span class="flex-spacer"></span>
   <button mat-button (click)="logout()">
      <mat-icon>logout</mat-icon>
      Salir
   </button>
</mat-toolbar>
<div class="container">
   <div class="filters row g-3 align-items-end">
      <div class="col-md-3 mt-0">
         <label for="titleFilter" class="form-label">Título</label>
         <input type="text" class="form-control" id="titleFilter" [ngModel]="filterValues.title"
            (ngModelChange)="setFilter('title', $event)" placeholder="Buscar por título" />
      </div>
      <div class="col-md-3 mt-0">
         <label for="descriptionFilter" class="form-label">Descripción</label>
         <input type="text" class="form-control" id="descriptionFilter" [ngModel]="filterValues.description"
            (ngModelChange)="setFilter('description', $event)" placeholder="Buscar por descripción" />
      </div>
      <div class="col-md-3 mt-0">
         <label for="statusFilter" class="form-label">Estado</label>
         <select class="form-select" id="statusFilter" [ngModel]="filterValues.completed"
            (ngModelChange)="setFilter('completed', $event)">
            <option value="">Todos</option>
            <option value="completed">Completados</option>
            <option value="pending">Pendientes</option>
         </select>
      </div>
      <div class="col-md-3 mt-0 d-flex">
         <button type="button" class="btn btn-primary ms-auto d-flex align-items-center gap-1"
            (click)="openAddDialog()">
            <mat-icon>add</mat-icon>
            Agregar
         </button>
      </div>
   </div>
   <div class="table-container">
      <table mat-table [dataSource]="tasks" class="mat-elevation-z8 full-width">
         <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef>Título</th>
            <td mat-cell *matCellDef="let task">{{ task.title }}</td>
         </ng-container>
         <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>Descripción</th>
            <td mat-cell *matCellDef="let task">{{ task.description }}</td>
         </ng-container>
         <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef>Fecha de creación</th>
            <td mat-cell *matCellDef="let task">{{ task.createdAt }}</td>
         </ng-container>
         <ng-container matColumnDef="completed">
            <th mat-header-cell *matHeaderCellDef class="text-center">Completada</th>
            <td mat-cell *matCellDef="let task" class="text-center">
               <mat-checkbox [checked]="task.completed" (change)="toggleTask(task)"></mat-checkbox>
            </td>
         </ng-container>
         <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let task">
               <button mat-icon-button color="accent" (click)="openEditDialog(task)">
                  <mat-icon>edit</mat-icon>
               </button>
               <button mat-icon-button color="warn" (click)="openDeleteDialog(task)">
                  <mat-icon>delete</mat-icon>
               </button>
            </td>
         </ng-container>
         <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
         <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
   </div>
</div>